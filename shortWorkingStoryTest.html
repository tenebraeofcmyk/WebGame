<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



    <title>Nested Text Array Display</title>
    <style>
        #story-container {
            font-family: Arial, sans-serif;
        }
    </style>
</head>

<body>

    <div id="story-container"></div>

    <button id="nextButton" class="btn btn-outline-light" onclick="nextChapter()"> Next</button>
    <div id="torch-icon" style="display:none"> TORCH </div>

    <script>

        const story = {
            start: {
                title: "You wake in a dim room....",
                lines: [
                    "There are subtle shapes of furniture covered in sheets not far from the walls...",
                    "You push yourself off of the floor, and you feel the cold bitterness of a stone floor...",
                    "The cobbles beneath you make standing hard...",
                    "Fumbling along the walls, your hand brushes against something warm..."
                ]
            },
            chapter2: {
                title: "Another chapter title...",
                lines: [
                    "Line 1 for chapter 2...",
                    "Line 2 for chapter 2...",
                    // ...
                ]
            },
            chapter3: {
                title: "AhAha",
                lines: [
                    "Line One",
                    "Line Two",
                ]

            }
            // Add more objects to extend the story
        };

        let currentChapter = "start";
        let torchIcon; // Declare torchIcon globally

        function displayChapter() {
            console.log('Entering displayChapter. Current chapter:', currentChapter);
            const storyContainer = document.getElementById('story-container');
            const chapter = story[currentChapter];

            const chapterElement = document.createElement('div');
            chapterElement.innerHTML = `<p class="lead my-3">${chapter.title}</p>`;

            chapter.lines.forEach(line => {
                const lineElement = document.createElement('p');
                lineElement.classList.add('lead', 'my-3');
                lineElement.textContent = line;
                chapterElement.appendChild(lineElement);
            });
            storyContainer.innerHTML = '';
            storyContainer.appendChild(chapterElement);
        }

      
        
        function nextChapter() {
            // Logic to determine the next chapter based on the current chapter
            console.log('Entering nextChapter. Current chapter:', currentChapter);
        
            switch (currentChapter) {
                case "start":
                    console.log('Switch case: start');
                    currentChapter = "chapter2";
                    break;
                case "chapter2":
                    console.log('Switch case: chapter2');
                    // Move to the next chapter or perform other logic
                    torchIcon = document.getElementById('torch-icon');
                    torchIcon.style.display = 'block';
                    currentChapter = "chapter3";
                    break;
                // Add more cases as needed
            }
            
            // Remove the event listener after the click
            document.getElementById('nextButton').removeEventListener('click', nextChapter);
        
            // Display the next chapter
            displayChapter();
        }
        displayChapter();
        
        // Attach the initial click event listener. This version is currently working. Due to mouse click events misfiring or something that I could not find in the console log, the event listener has to be moved and removed to keep from firing off multiple times and skipping chapters.
        document.getElementById('nextButton').addEventListener('click', nextChapter);
        
        

    </script>
</body>

</html>