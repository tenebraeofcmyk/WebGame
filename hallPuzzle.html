<!DOCTYPE html>
<html lang="en">
<head>

    <!-- <script src="js/color-modes.js"></script>
    <script src="https://kit.fontawesome.com/c92bfa29e2.js" crossorigin="anonymous"></script> -->
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <title>Clear Local Storage</title>
  
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/blog/">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/blog.css" rel="stylesheet">

</head>
<body>
    
    <p style="font-weight: bold;">Inventory</p>
    <p>Coins: <span id="correctCount"></span></p> 
    <h1>Puzzle1</h1>
    <p>You are so glad you stopped as the market for candy before embarking on your journey. </p>
    <div id="problem"></div>
    <div id="userInput" style="display: none;">
        <br>
        <label for="userAnswer">Your Answer: $</label>
        <input type="text" id="userAnswer">
        <button id="submitBtn">Submit</button>
        <br>
    </div>
    <br>
    <div id="result"></div>
    <br>
    <div>
        <button id="ShowPuzzleButton" onclick="WPpuzzleroom3()">New Puzzle</button> 
        <button id="goToNextRoom" onclick="goToNextRoom()">Move On</button>
    </div>

    <!--Javascript-->        
    <script>

    // Load correct answer count from local storage on page load
    let correctAnswers = localStorage.getItem('correctAnswers') || 0;
    document.getElementById('correctCount').textContent = correctAnswers;
    document.getElementById("goToNextRoom").style.display = "none";

    function goToNextRoom() {
        window.location.href = 'testnextpage.html';
    }

    function WPpuzzleroom3() {
        
        //Initial Display
        document.getElementById("result").innerHTML = '';
        document.getElementById("ShowPuzzleButton").style.display = "none";
        document.getElementById("userAnswer").value='';
        document.getElementById("goToNextRoom").style.display = "none";

        //Equation    
        const num1 = Math.floor(Math.random() * 107) + 52;
        const num2 = Math.floor(Math.random() * 107) + 1;
        const num3 = Math.floor(Math.random() * 14) + 1;
        const operation = "multiplication";
        const correctAnswer = (num2 * num3);
        
        //problem and userInput visible
        document.getElementById("problem").innerHTML = `You bought candy for $${num2} per bag. If you bought ${num3} bags, how much does you spend?`;
        document.getElementById("userInput").style.display = "block";
    
        // Check the answer when the user submits
        document.getElementById("submitBtn").onclick = function () {
            const userAnswer = document.getElementById("userAnswer").value;
        
            if (userAnswer == correctAnswer) {
                
                document.getElementById("result").innerHTML = "Fantastic! You get one coin";
                correctAnswers++;
                
                // Save correct answer count to local storage
                localStorage.setItem('correctAnswers', correctAnswers);
                updateCorrectCount();

                document.getElementById("goToNextRoom").style.display = "block";
                document.getElementById("ShowPuzzleButton").style.display = "block";
            } 

            else {
                    document.getElementById("result").innerHTML = `Sorry, the correct answer is ${correctAnswer}. Keep practicing!`;
                    document.getElementById("ShowPuzzleButton").style.display = "block";
            }
    
            // Hide the input field after submitting
            document.getElementById("problem").innerHTML = '';
            document.getElementById("userInput").style.display = "none";

            function updateCorrectCount() {
                document.getElementById('correctCount').textContent = correctAnswers;
            }
        }  
        }
    </script>

</body>
</html>
